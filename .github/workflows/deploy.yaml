name: shared-deploy

on:
  workflow_call:
    inputs:
      version:
        description: Version / Tag to deploy
        required: true
        type: string

      environment:
        description: Target environment
        required: true
        type: string

      region:
        description: AWS region
        required: true
        type: string

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸš€ Deploy Application
        run: |
          echo ""
          echo "ðŸš€ Deploying version: ${{ inputs.version }}"
          echo "ðŸŒ Environment:       ${{ inputs.environment }}"
          echo "ðŸ“ Region:            ${{ inputs.region }}"
          echo ""
          echo "âœ… Deployment started..."

      # ---- simulate deployment / replace with real steps ----
      - name: ðŸ”§ Deployment Logic
        run: |
          echo "Running deployment steps..."
          sleep 3
          echo "Deployment logic completed."

      # ---- final summary (right-side Summary tab) ----
      - name: ðŸ“„ Deployment Summary
        run: |
          echo "## ðŸš€ Deployment Completed" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "| Field | Value |" >> $GITHUB_STEP_SUMMARY
          echo "|------|-------|" >> $GITHUB_STEP_SUMMARY
          echo "| Version | **${{ inputs.version }}** |" >> $GITHUB_STEP_SUMMARY
          echo "| Environment | **${{ inputs.environment }}** |" >> $GITHUB_STEP_SUMMARY
          echo "| Region | **${{ inputs.region }}** |" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "âœ… Deployment finished successfully." >> $GITHUB_STEP_SUMMARY
